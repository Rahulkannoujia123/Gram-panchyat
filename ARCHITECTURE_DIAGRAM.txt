╔════════════════════════════════════════════════════════════════════════════════════════╗
║           GRAM PANCHAYAT APP - VILLAGE FILTERING & PRADHAN SYSTEM                     ║
║                    Complete Architecture Overview (2026-02-24)                        ║
╚════════════════════════════════════════════════════════════════════════════════════════╝

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                             USER INTERFACE LAYER                                       │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                         │
│  ┌──────────────────────────┐         ┌──────────────────────────┐                     │
│  │   HomePage              │         │   VillagesPage           │                     │
│  │  ┌────────────────────┐ │         │  ┌────────────────────┐  │                     │
│  │  │ गाँव (Button)      │ │ ────► │ ┌─ VillageSelector   │  │                     │
│  │  └────────────────────┘ │         │ │  (Autocomplete)    │  │                     │
│  │  ┌────────────────────┐ │         │ │  ┌──────────────┐  │  │                     │
│  │  │ News, Complaints  │ │         │ │  │ [गाँव चुनें]  │  │  │                     │
│  │  │ Schemes, etc      │ │         │ │  │  ▼            │  │  │                     │
│  │  └────────────────────┘ │         │ │  │ • प्रेहरू    │  │  │                     │
│  └──────────────────────────┘         │ │  │ • पडरीगंज  │  │  │                     │
│                                       │ │  │ • अरवल ... │  │  │                     │
│                                       │ │  └──────────┘  │  │  │                     │
│                                       │ └────────────────┘  │  │                     │
│                                       │                     │  │                     │
│                                       │ ┌─────────────────┐ │  │                     │
│                                       │ │  PradhanCard    │ │  │                     │
│                                       │ │  (API Data)     │ │  │                     │
│                                       │ │  ┌───────────┐  │ │  │                     │
│                                       │ │  │ सरपंच    │  │ │  │                     │
│                                       │ │  │ राजेश   │  │ │  │                     │
│                                       │ │  │ Phone    │  │ │  │                     │
│                                       │ │  │ Email    │  │ │  │                     │
│                                       │ │  │ Pop: 2500│  │ │  │                     │
│                                       │ │  └───────────┘  │ │  │                     │
│                                       │ └─────────────────┘ │  │                     │
│                                       │                     │  │                     │
│                                       │ ┌─────────────────┐ │  │                     │
│                                       │ │ Village Content │ │  │                     │
│                                       │ │ (Filtered)      │ │  │                     │
│                                       │ │ • News          │ │  │                     │
│                                       │ │ • Complaints    │ │  │                     │
│                                       │ │ • Notices       │ │  │                     │
│                                       │ └─────────────────┘ │  │                     │
│                                       └─────────────────────┘  │                     │
│                                                                  │                     │
│  ┌──────────────────────────┐         ┌──────────────────────────┐                     │
│  │   VillageDetailPage      │ ◄─────  │ (Navigate with villageId)│                     │
│  │  (Village Clicked)       │         └──────────────────────────┘                     │
│  │  ┌────────────────────┐  │                                                         │
│  │  │ PradhanCard        │  │                                                         │
│  │  │ (Real-time API)    │  │                                                         │
│  │  │                    │  │                                                         │
│  │  │ Village News       │  │                                                         │
│  │  │ Village Complaints │  │                                                         │
│  │  │ Village Notices    │  │                                                         │
│  │  └────────────────────┘  │                                                         │
│  └──────────────────────────┘                                                         │
│                                                                                         │
└─────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                          BUSINESS LOGIC LAYER (Hooks)                                  │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                         │
│  ┌─────────────────────┐         ┌─────────────────────┐                              │
│  │ usePradhanData      │         │ usePopulationData   │                              │
│  ├─────────────────────┤         ├─────────────────────┤                              │
│  │ villageId (input)   │         │ villageId (input)   │                              │
│  │   ↓                 │         │   ↓                 │                              │
│  │ Call pradhanService │         │ Call popService     │                              │
│  │   ↓                 │         │   ↓                 │                              │
│  │ [Loading]           │         │ [Loading]           │                              │
│  │   ↓                 │         │   ↓                 │                              │
│  │ Returns:            │         │ Returns:            │                              │
│  │ - pradhan           │         │ - population        │                              │
│  │ - loading           │         │ - loading           │                              │
│  │ - error             │         │ - error             │                              │
│  └─────────────────────┘         └─────────────────────┘                              │
│                                                                                         │
│  ┌──────────────────────────────────────────────────────────────────────────────────┐ │
│  │                    useVillages Hook (Existing)                                   │ │
│  │                    Returns: [104 villages] + loading + error                     │ │
│  └──────────────────────────────────────────────────────────────────────────────────┘ │
│                                                                                         │
└─────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                          DATA SERVICES LAYER (APIs)                                    │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                         │
│  ┌──────────────────────────┐         ┌──────────────────────────┐                     │
│  │  pradhanService.ts       │         │  populationService.ts    │                     │
│  ├──────────────────────────┤         ├──────────────────────────┤                     │
│  │ fetchPradhanData()       │         │ fetchPopulationData()    │                     │
│  │ fetchPradhanDataBatch()  │         │ fetchPopulationBatch()   │                     │
│  │ localPradhanData (104)   │         │ census2011Data (104)     │                     │
│  │                          │         │ calculateStats()         │                     │
│  │ ┌──────────────────┐     │         │ ┌──────────────────┐     │                     │
│  │ │ API Priority:    │     │         │ │ API Priority:    │     │                     │
│  │ │ 1. LGD API       │     │         │ │ 1. Census API    │     │                     │
│  │ │ 2. LocalBody API │     │         │ │ 2. World Bank    │     │                     │
│  │ │ 3. Local Data    │     │         │ │ 3. Local Data    │     │                     │
│  │ │                  │     │         │ │                  │     │                     │
│  │ │ Timeout: 5 sec   │     │         │ │ Timeout: 5 sec   │     │                     │
│  │ └──────────────────┘     │         │ └──────────────────┘     │                     │
│  └──────────────────────────┘         └──────────────────────────┘                     │
│                                                                                         │
│  ┌──────────────────────────┐                                                          │
│  │  villageService.ts       │                                                          │
│  │  (Existing - Enhanced)   │                                                          │
│  │  fetchVillagesFromAPIs() │                                                          │
│  │  Returns: 104 villages   │                                                          │
│  └──────────────────────────┘                                                          │
│                                                                                         │
└─────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                         EXTERNAL API INTEGRATION                                       │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                         │
│  PRADHAN DATA:                    POPULATION DATA:                                      │
│  ┌──────────────────┐             ┌──────────────────┐                                 │
│  │ data.gov.in      │             │ Census 2011 API  │                                 │
│  │ LGD API          │             │ data.gov.in      │                                 │
│  └──────────────────┘             └──────────────────┘                                 │
│           │                                  │                                          │
│           ↓ (JSON)                          ↓ (JSON)                                    │
│  ┌──────────────────┐             ┌──────────────────┐                                 │
│  │ localbodydata    │             │ World Bank API   │                                 │
│  │ .com             │             │                  │                                 │
│  └──────────────────┘             └──────────────────┘                                 │
│           │                                  │                                          │
│           ↓ (JSON)                          ↓ (JSON)                                    │
│  ┌──────────────────┐             ┌──────────────────┐                                 │
│  │ Local Database   │             │ Local Database   │                                 │
│  │ (104 Sarpanchs)  │             │ (104 Populations)│                                 │
│  └──────────────────┘             └──────────────────┘                                 │
│           │                                  │                                          │
│           └──────────────┬───────────────────┘                                          │
│                          │                                                               │
│                    [Always Returns Data]                                                │
│                                                                                         │
└─────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                         UTILITY LAYER (Filtering)                                      │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                         │
│  villageFilters.ts                                                                     │
│  ├─ filterNewsByVillage()                                                              │
│  ├─ filterComplaintsByVillage()                                                        │
│  ├─ filterSchemesByVillage()                                                           │
│  ├─ filterNoticesByVillage()                                                           │
│  └─ getVillageContent()   ← Batch operation                                            │
│                                                                                         │
│  villageService.ts (Existing)                                                          │
│  └─ fetchVillagesFromAPIs()   ← Returns 104 villages                                   │
│                                                                                         │
│  pindraVillages.ts (Data File)                                                         │
│  └─ 104 Gram Panchayats with details                                                   │
│                                                                                         │
└─────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                         DATA FLOW DIAGRAM                                              │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                         │
│  User Selects Village                                                                   │
│          ↓                                                                               │
│  setSelectedVillageId(id)                                                               │
│          ↓                                                                               │
│  usePradhanData(id) ──┐              usePopulationData(id) ──┐                         │
│          │            │                       │              │                         │
│          └─ Call      │                       └─ Call         │                         │
│            pradhanService                      populationService                       │
│            .fetch()          ┌───────────────────┘            │                         │
│                              ↓                                 │                         │
│                       [Try 3 APIs]                            │                         │
│                       ↓ (Fail?)                               │                         │
│                       Use Local Data                          │                         │
│                              │                                 │                         │
│                              └────────┬───────────────────────┘                         │
│                                       ↓                                                  │
│                            Return Both Datasets                                        │
│                                       ↓                                                  │
│                            PradhanCard Display                                         │
│                                       ↓                                                  │
│                            User Sees Updated Info                                      │
│                                                                                         │
└─────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                         FILE STRUCTURE                                                 │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                         │
│  src/                                                                                   │
│  ├── components/                                                                       │
│  │   ├── VillageSelector.tsx        ← NEW: Autocomplete dropdown                      │
│  │   └── PradhanCard.tsx            ← NEW: Pradhan info display                       │
│  │                                                                                      │
│  ├── services/                                                                         │
│  │   ├── pradhanService.ts          ← NEW: Sarpanch API fetching                      │
│  │   ├── populationService.ts       ← NEW: Population API fetching                    │
│  │   └── villageService.ts          ← EXISTING: 104 villages loader                   │
│  │                                                                                      │
│  ├── hooks/                                                                            │
│  │   ├── usePradhanData.ts          ← NEW: Pradhan hook                               │
│  │   ├── usePopulationData.ts       ← NEW: Population hook                            │
│  │   └── useVillages.ts             ← EXISTING: Villages hook                         │
│  │                                                                                      │
│  ├── utils/                                                                            │
│  │   ├── villageFilters.ts          ← NEW: Content filtering                          │
│  │   └── colors.ts                  ← EXISTING: Theming                               │
│  │                                                                                      │
│  ├── pages/                                                                            │
│  │   ├── VillagesPage.tsx           ← UPDATED: +Selector +PradhanCard                 │
│  │   ├── VillageDetailPage.tsx      ← UPDATED: +Hooks +PradhanCard                    │
│  │   └── ... (other pages)                                                             │
│  │                                                                                      │
│  ├── data/                                                                             │
│  │   ├── pindraVillages.ts          ← 104 Gram Panchayats                             │
│  │   └── index.ts                   ← Main data exports                                │
│  │                                                                                      │
│  └── types/                                                                            │
│      └── index.ts                   ← TypeScript interfaces                            │
│                                                                                         │
│  Documentation:                                                                        │
│  ├── BUILD_SUMMARY.md               ← Overall summary                                  │
│  ├── QUICK_START_VILLAGES.md        ← User guide                                       │
│  ├── VILLAGE_FEATURES_GUIDE.md      ← Developer guide                                  │
│  ├── INTEGRATION_POINTS.md          ← Technical deep dive                              │
│  ├── CHANGELOG_VILLAGE_FEATURES.md  ← All changes                                      │
│  └── ARCHITECTURE_DIAGRAM.txt       ← This file                                        │
│                                                                                         │
└─────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                         COMPONENT INTERACTION MATRIX                                   │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                         │
│  VillageSelector                                                                        │
│    ↓ input: villages[]                                                                  │
│    ↓ trigger: onSelect(villageId)                                                       │
│    → usePradhanData(villageId)                                                          │
│    → usePopulationData(villageId)                                                       │
│    → PradhanCard renders                                                                │
│                                                                                         │
│  PradhanCard                                                                            │
│    ↑ input: pradhan, population, loading                                               │
│    ← from usePradhanData hook                                                           │
│    ← from usePopulationData hook                                                        │
│                                                                                         │
│  Content Filtering                                                                      │
│    ← villageId (from state)                                                             │
│    → filterNewsByVillage()                                                              │
│    → filterComplaintsByVillage()                                                        │
│    → filterNoticesByVillage()                                                           │
│                                                                                         │
└─────────────────────────────────────────────────────────────────────────────────────────┘

╔════════════════════════════════════════════════════════════════════════════════════════╗
║                           SYSTEM STATUS: OPERATIONAL ✅                               ║
║                                                                                        ║
║  104 Villages | Real-time APIs | Fallback Data | Mobile Ready | Fully Documented      ║
╚════════════════════════════════════════════════════════════════════════════════════════╝
